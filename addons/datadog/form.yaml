name: datadog
tabs:
- name: main
  label: Info
  sections:
  - name: section_one
    contents: 
    - type: heading
      label: Deploy DataDog Agent
    - type: subtitle
      label: This installs the DataDog agent, which forwards all logs from Porter to DataDog for ingestion. It may take around 30 minutes for the logs to arrive in your DataDog instance.
    - type: string-input
      label: DataDog Site
      variable: datadog.site
      required: true
      settings:
        default: 'datadoghq.com'
    - type: string-input
      label: DataDog API Key
      variable: datadog.apiKey
      required: true
      placeholder: 'ex: abcd1234efgh5678ijkl9012kmno3456pqrs7890tuvw'
      settings:
        default: ''
- name: resources
  label: Resources
  sections:
  - name: main_section
    contents:
    - type: heading
      label: Resources
    - type: subtitle
      label: Configure resources assigned to the Datadog agent.
    - type: number-input
      label: Datadog agent RAM
      variable: agents.containers.agent.resources.requests.memory
      placeholder: "ex: 256"
      settings:
        unit: Mi
        default: 256
    - type: number-input
      label: Datadog agent CPU
      variable: agents.containers.agent.resources.requests.cpu
      placeholder: "ex: 100"
      settings:
        unit: m
        default: 100
    - type: checkbox
      variable: advancedResourceConfig
      label: Enable advanced resource configuration
      settings:
        default: false
  - name: advancedResources
    show_if: advancedResourceConfig
    contents:
    - type: subtitle
      label: Configure resources assigned to the Datadog process agent.
    - type: number-input
      label: Process agent RAM
      variable: agents.containers.processAgent.resources.requests.memory
      placeholder: "ex: 200"
      settings:
        unit: Mi
    - type: number-input
      label: Process agent CPU
      variable: agents.containers.processAgent.resources.requests.cpu
      placeholder: "ex: 100"
      settings:
        unit: m
    - type: subtitle
      label: Configure resources assigned to the Datadog trace agent.
    - type: number-input
      label: Trace agent RAM
      variable: agents.containers.traceAgent.resources.requests.memory
      placeholder: "ex: 200"
      settings:
        unit: Mi
    - type: number-input
      label: Trace agent CPU
      variable: agents.containers.traceAgent.resources.requests.cpu
      placeholder: "ex: 100"
      settings:
        unit: m
    - type: subtitle
      label: Configure resources assigned to the Datadog system probe.
    - type: number-input
      label: System probe RAM
      variable: agents.containers.systemProbe.resources.requests.memory
      placeholder: "ex: 200"
      settings:
        unit: Mi
    - type: number-input
      label: System probe CPU
      variable: agents.containers.systemProbe.resources.requests.cpu
      placeholder: "ex: 100"
      settings:
        unit: m
    - type: subtitle
      label: Configure resources assigned to the Datadog security agent.
    - type: number-input
      label: Security agent RAM
      variable: agents.containers.securityAgent.resources.requests.memory
      placeholder: "ex: 200"
      settings:
        unit: Mi
    - type: number-input
      label: Security agent CPU
      variable: agents.containers.securityAgent.resources.requests.cpu
      placeholder: "ex: 100"
      settings:
        unit: m
    - type: subtitle
      label: Configure resources assigned to the Datadog init containers.
    - type: number-input
      label: Init containers RAM
      variable: agents.containers.initContainers.resources.requests.memory
      placeholder: "ex: 200"
      settings:
        unit: Mi
    - type: number-input
      label: Init containers CPU
      variable: agents.containers.initContainers.resources.requests.cpu
      placeholder: "ex: 100"
      settings:
        unit: m